---
import { SHARE_LINKS } from "@/constants";
import LinkButton from "./LinkButton.astro";
import { DEFAULT_LOCALE, type Locale } from "@/i18n/locales";
import { t } from "@/i18n";

const URL = Astro.url;

// Extract language from URL
const pathParts = Astro.url.pathname.split("/").filter(p => p.trim());
const lang = (pathParts[0] || DEFAULT_LOCALE) as Locale;
---

{
  SHARE_LINKS.length > 0 && (
    <div class="flex flex-none flex-col items-center justify-center gap-1 md:items-start">
      <span class="italic">{t(lang, "share.title")}</span>
      <div class="text-center">
        {SHARE_LINKS.map(social => {
          const translationKey = `share.${social.name.toLowerCase()}`;
          const linkTitle = t(lang, translationKey);

          return (
            <LinkButton
              href={`${social.href + URL}`}
              class="scale-90 p-2 hover:rotate-6 sm:p-1"
              title={linkTitle}
            >
              <social.icon class="inline-block size-6 scale-125 fill-transparent stroke-current stroke-2 opacity-90 group-hover:fill-transparent sm:scale-110" />
              <span class="sr-only">{linkTitle}</span>
            </LinkButton>
          );
        })}
      </div>
    </div>
  )
}
